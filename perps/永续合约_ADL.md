**ADL** 是 **Auto-Deleveraging**（自动去杠杆化）的缩写，是**去中心化永续合约协议（Perp DEX）或衍生品交易所**在极端市场条件下（如剧烈波动、清算延迟、穿仓风险）为**维持系统偿付能力**而采取的一种**最后手段**的风险控制机制。

---

### 一、ADL 解决的问题

当以下情况同时发生时，系统可能面临 **穿仓（Bad Debt）** 风险：

- 用户仓位亏损 > 其全部保证金；
- 清算未能及时执行（因预言机延迟、Gas 拥堵、缺乏清算人等）；
- 保险基金（Insurance Fund）不足或不存在。

此时，系统需要**快速填补亏损缺口**，否则整个协议可能资不抵债。

**ADL 就是在这种情况下，强制平掉“盈利且高杠杆”的对手方仓位，用其利润来弥补穿仓损失。**

---

### 二、ADL 如何工作？（以多空对为例）

假设：

- 用户 A：开 **10 倍 ETH 多仓**，已穿仓，欠系统 100 USDC（坏账）。
- 用户 B：开 **20 倍 ETH 空仓**，当前盈利 200 USDC，且是系统中“最该被 ADL”的人。

**ADL 触发后：**

1. 系统自动识别：用户 B 是**盈利最多 + 杠杆最高 + 与穿仓方向相反**（空 vs 多）的对手方。
2. **无需用户 B 操作**，系统强制平掉其部分或全部空仓（例如平掉价值 100 USDC 的仓位）。
3. 用户 B 的 **100 USDC 盈利被“没收”**，用于填补用户 A 的穿仓缺口。
4. 系统恢复平衡，无坏账产生。

> 用户 B 并未违规，只是因为“赚得多、杠杆高”，被选为风险吸收者。

---

### 三、谁会被 ADL？—— ADL 优先级

协议通常按以下维度对用户排序，优先 ADL **风险贡献最大者**：

1. **仓位盈利程度**（越盈利越优先）  
2. **杠杆倍数**（杠杆越高越优先）  
3. **仓位方向**（必须与穿仓方向相反，如穿仓是多，则 ADL 空头）  

部分协议会显示 **ADL 排名/风险指数**，让用户知道自己被 ADL 的概率。

---

### 四、ADL 的优缺点

| 优点 | 缺点 |
|------|------|
| ✅ **避免系统性坏账**，保障协议偿付能力 | ❌ **伤害高盈利用户**，打击交易积极性 |
| ✅ 无需外部资金注入，完全内生解决风险 | ❌ 可能引发“ADL 恐慌”，用户不敢高杠杆/高盈利 |
| ✅ 在链上可自动化执行 | ❌ 机制复杂，普通用户难以理解 |

---

### 五、哪些协议使用 ADL？

- **中心化交易所（CEX）**：BitMEX、Bybit、OKX 等早期就采用 ADL（配合保险基金）。
- **DeFi 协议**：
  - **Mango Markets**（v3 前）：曾因无 ADL + 无足够保险基金被攻击导致巨额坏账。
  - **Deriva Protocol**、**Drift Protocol**：明确采用 ADL 作为风险兜底。
  - **GMX / Gains**：**不使用 ADL**，而是让 LP 池直接承担穿仓损失。
  - **dYdX (v3/v4)**：依赖强大的保险基金 + 高效清算，**几乎不触发 ADL**。

---

### 六、如何避免被 ADL？

如果你是交易员，可采取以下措施降低被 ADL 风险：

1. **降低杠杆**：高杠杆是 ADL 的首要筛选条件。
2. **及时止盈**：巨额浮盈会提高 ADL 优先级。
3. **关注 ADL 指示器**：部分协议（如 Deriva）提供 ADL 风险仪表盘。
4. **避免在极端行情中持有大额单向盈利仓位**。

---

### 总结

> **ADL（Auto-Deleveraging）是一种“劫富济贫”式的风险再分配机制**：  
> 当系统因穿仓濒临崩溃时，强制平掉最“富有”（高盈利+高杠杆）的对手方仓位，用其利润填补亏损，从而保护整个协议的健康。

它体现了 DeFi 衍生品的一个核心现实：**在去中心化世界里，风险不会消失，只会转移。**  
ADL 就是将极端风险从系统层面，转移给少数“风险承受能力最强”的参与者。
