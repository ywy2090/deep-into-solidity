
flowchart TB

  %% =========================
  %% 0) Ê†∏ÂøÉËµÑ‰∫ß
  %% =========================
  AAVE["ü™ô AAVE ‰ª£Â∏Å"]

  %% =========================
  %% 1) Ëé∑ÂèñË∑ØÂæÑÔºàÂÖ•Âè£Ôºâ
  %% =========================
  subgraph ACQ["üí° Áî®Êà∑Ëé∑Âèñ AAVE ÂÖ•Âè£"]
    MKT["‰∫åÁ∫ßÂ∏ÇÂú∫Ë¥≠‰π∞ CEX/DEX"]
    REW["Ë¥®ÊäºÂ•ñÂä±Ëé∑Âèñ"]
    GRANT["DAO ÁîüÊÄÅÊã®Ê¨æ Ë¥°ÁåÆËÄÖÊîØ‰ªò"]
    SRV["DAO ÊúçÂä°ÂïÜÊîØ‰ªò Êù•Ëá™ÈáëÂ∫ìÂÇ®Â§á"]
  end

  MKT --> AAVE
  REW --> AAVE
  GRANT --> AAVE
  SRV --> AAVE

  %% =========================
  %% 2) Ê≤ªÁêÜ
  %% =========================
  subgraph GOVSG["üó≥Ô∏è Ê≤ªÁêÜ DAO"]
    GOV["Ê≤ªÁêÜÊäïÁ•® ÊèêÊ°à/ÂèÇÊï∞/ÂçáÁ∫ß"]
    DELEG["ÂßîÊâòÊäïÁ•® Delegation"]
  end

  AAVE -->|"ÊäïÁ•®"| GOV
  AAVE -->|"ÂßîÊâò"| DELEG
  DELEG -->|"ÂΩ±Âìç"| GOV

  %% =========================
  %% 3) Ë¥®Êäº‰∏éÂÆâÂÖ®Ê®°Âùó
  %% =========================
  subgraph SMSG["üõ°Ô∏è Safety Module Ë¥®Êäº‰∏éÈ£éÈô©"]
    SM["Safety Module È£éÈô©ÁºìÂÜ≤Ê±†"]
    STKA["stkAAVE Ë¥®ÊäºÂá≠ËØÅ 1:1 Èì∏ÈÄ†"]
    CD1["ÂÜ∑Âç¥Êúü Cooldown ÂºÄÂßãÂÄíËÆ°Êó∂"]
    WW1["ËµéÂõûÁ™óÂè£ Withdrawal Window"]
    UNSTA["Ëß£Èô§Ë¥®Êäº stkAAVE ËΩ¨Âõû AAVE"]
    SLASH["Shortfall Event Áº∫Âè£‰∫ã‰ª∂ ÊúÄÈ´òÂâäÂáè 30%"]
    REISSUE["Recovery Issuance ‰∏¥Êó∂Â¢ûÂèëË°•ÂÅøÂ∑•ÂÖ∑ Ë¶ÜÁõñÂçèËÆÆËµ§Â≠ó"]
    STKB["stkBPT Ë¥®ÊäºÂá≠ËØÅ"]
    CD2["ÂÜ∑Âç¥Êúü Cooldown ÂºÄÂßãÂÄíËÆ°Êó∂"]
    WW2["ËµéÂõûÁ™óÂè£ Withdrawal Window"]
    UNSTB["Ëß£Èô§Ë¥®Êäº stkBPT ËΩ¨Âõû ABPT"]
  end

  AAVE -->|"Ë¥®Êäº"| SM
  SM -->|"Èì∏ÈÄ† 1:1"| STKA
  STKA -->|"ÂºÄÂßã"| CD1
  CD1 -->|"ËøõÂÖ•"| WW1
  WW1 -->|"ËµéÂõû"| UNSTA
  UNSTA -->|"ÂõûÂà∞"| AAVE

  SM -->|"Ëß¶ÂèëÈ£éÈô©Ë¶ÜÁõñ"| SLASH
  SLASH -->|"ÂâäÂáè"| STKA
  SLASH -->|"ÂâäÂáè"| STKB
  SLASH -->|"‰∏çË∂≥Êó∂Ëß¶Âèë"| REISSUE

  STKB -->|"ÂºÄÂßã"| CD2
  CD2 -->|"ËøõÂÖ•"| WW2
  WW2 -->|"ËµéÂõû"| UNSTB

  STKA -->|"‰∫´ÊúâÊäïÁ•®ÊùÉ"| GOV
  STKB -->|"‰∫´ÊúâÊäïÁ•®ÊùÉ"| GOV

  %% =========================
  %% 4) Balancer Ë∑ØÂæÑ
  %% =========================
  subgraph BPTSG["üåä Balancer Ë∑ØÂæÑ ABPT"]
    LP["Êèê‰æõÊµÅÂä®ÊÄß AAVE #43; ETH"]
    ABPT["ABPT Ê±†Â≠ê‰ªΩÈ¢ùÂá≠ËØÅ"]
    EXITLP["ÈÄÄÂá∫ÊµÅÂä®ÊÄß Redeem LP ABPT ËΩ¨Âõû AAVE #43; ETH"]
  end

  AAVE -->|"ÈÖçÂØπÂÅöÂ∏Ç"| LP
  LP -->|"Ëé∑Âæó"| ABPT
  ABPT -->|"Ë¥®Êäº"| SM
  SM -->|"Èì∏ÈÄ†"| STKB
  UNSTB -->|"ÂæóÂà∞"| ABPT
  ABPT -->|"ÈÄÄÂá∫Ê±†Â≠ê"| EXITLP
  EXITLP -->|"ÂæóÂà∞"| AAVE

  %% =========================
  %% 5) aToken ÂÄüË¥∑Èó≠ÁéØ
  %% =========================
  subgraph LENDSG["üè¶ Aave ÂÄüË¥∑Èó≠ÁéØ AAVE ‰∏é aAAVE"]
    POOL["Aave Pool ÂÄüË¥∑Â∏ÇÂú∫"]
    aAAVE["aAAVE Â≠òÊ¨æÂá≠ËØÅ ÊåÅÁª≠ÁîüÊÅØ"]
    COLL["ÂêØÁî®ÊäµÊäº Enable Collateral"]
    BORROW["ÂÄüÂá∫ÂÖ∂‰ªñËµÑ‰∫ß Borrow"]
    REPAY["ÂÅøËøòÂÄüÊ¨æ Repay"]
    UNLOCK["Ëß£Èô§ÊäµÊäº Disable Collateral"]
    REDEEM["ËµéÂõû Withdraw aAAVE ËΩ¨Âõû AAVE"]
  end

  AAVE -->|"Â≠òÂÖ• Deposit"| POOL
  POOL -->|"Èì∏ÈÄ†"| aAAVE
  aAAVE -->|"ÂêØÁî®ÊäµÊäº"| COLL
  COLL -->|"ÂÄüÂá∫"| BORROW
  BORROW -->|"ÂÅøËøò"| REPAY
  REPAY -->|"Ëß£Êäº"| UNLOCK
  UNLOCK -->|"ÁªßÁª≠ÊåÅÊúâ"| aAAVE
  aAAVE -->|"ËµéÂõû Withdraw"| REDEEM
  REDEEM -->|"ÂõûÂà∞"| AAVE

  %% =========================
  %% 6) Ë¥πÁî®ÂΩíÈõÜ
  %% =========================
  subgraph FEESG["üí∞ Ë¥πÁî®ÂΩíÈõÜ Collector Ëá≥ Treasury Ëá≥ ÂàÜÈÖçÂõûË¥≠"]
    FEES["ÂçèËÆÆË¥πÁî®Êù•Ê∫ê ÂÄüË¥∑Âà©Â∑Æ reserve factor Ê∏ÖÁÆóË¥πÁî® Èó™ÁîµË¥∑ÊâãÁª≠Ë¥π"]
    COLLECT["Fee Collector Ë¥πÁî®Êî∂ÈõÜÂêàÁ∫¶"]
    TREAS["DAO Treasury ÂõΩÂ∫ì Collector ÊåÅ‰ªì"]
    RES["Ecosystem Reserve ÁîüÊÄÅÁ≥ªÁªüÂÇ®Â§á ÊøÄÂä±Êã®Ê¨æÊîØ‰ªò"]
    AFC["AFC ÊâßË°åÂßîÂëò‰ºö Â§öÁ≠æ 3/4 Èó®Èôê"]
    BUY["‰∫åÁ∫ßÂ∏ÇÂú∫ÂõûË¥≠ AAVE Âπ¥È¢ÑÁÆó 50M Âë® 25K~175K"]
  end

  FEES -->|"‰∏äÁº¥ÂΩíÈõÜ"| COLLECT
  COLLECT -->|"ËøõÂÖ•"| TREAS
  TREAS -->|"Ê≤ªÁêÜÂÜ≥Á≠ñÂàÜÈÖç"| RES
  TREAS -->|"ÊéàÊùÉÊâßË°å"| AFC
  AFC -->|"ÊâßË°åÂõûË¥≠"| BUY
  BUY -->|"‰π∞ÂÖ•"| AAVE
  RES -->|"Ë¥®ÊäºÂ•ñÂä±ÂèëÊîæ"| REW
  RES -->|"Êã®Ê¨æÊîØ‰ªò"| GRANT

  %% =========================
  %% 7) GHO ‰∏é Anti-GHO
  %% =========================
  subgraph GHOSG["‚öóÔ∏è GHO Êî∂ÂÖ•ÂàÜÈÖç Anti-GHO Êú∫Âà∂"]
    GHO["GHO ÂéüÁîüÁ®≥ÂÆöÂ∏Å"]
    GHOREV["GHO ÂçèËÆÆÊî∂ÂÖ• 50% Èì∏ÈÄ† Anti-GHO"]
    ANTI["Anti-GHO ‰∏çÂèØËΩ¨ËÆ© ERC-20 Á∫øÊÄß‰∫ßÁîü ÊØè‰∏§Âë®ÂèØÈ¢ÜÂèñ"]
    DIST80["80% ÂàÜÈÖçÁªô stkAAVE ÊåÅÊúâËÄÖ"]
    DIST20["20% ÂàÜÈÖçÁªô stkBPT ÊåÅÊúâËÄÖ"]
    USE1["Áî®Ê≥ï‚ë† 1:1 ÊäµÊ∂à GHO ÂÄ∫Âä° Áõ∏ÂΩì‰∫éÂÖçÊÅØËøòÊ¨æ"]
    USE2["Áî®Ê≥ï‚ë° ËΩ¨Êç¢‰∏∫ stkGHO ‰∫´ÊúâËøõ‰∏ÄÊ≠•ÊøÄÂä±"]
    STKG["stkGHO"]
  end

  GHO -->|"‰∫ßÁîü"| GHOREV
  GHOREV -->|"Èì∏ÈÄ†"| ANTI
  ANTI -->|"ÂàÜÈÖç"| DIST80
  ANTI -->|"ÂàÜÈÖç"| DIST20
  DIST80 -->|"ÊµÅÂêë"| STKA
  DIST20 -->|"ÊµÅÂêë"| STKB
  ANTI -->|"‰ΩøÁî®"| USE1
  ANTI -->|"‰ΩøÁî®"| USE2
  USE2 --> STKG

  %% =========================
  %% Ê†∑Âºè
  %% =========================
  classDef core fill:#6B46C1,stroke:#553C9A,color:#fff,font-weight:bold
  classDef acq fill:#322659,stroke:#44337A,color:#fff
  classDef gov fill:#2C7A7B,stroke:#285E61,color:#fff
  classDef stake fill:#2B6CB0,stroke:#2C5282,color:#fff
  classDef bpt fill:#2C5282,stroke:#2A4365,color:#fff
  classDef lend fill:#4A5568,stroke:#2D3748,color:#fff
  classDef fee fill:#276749,stroke:#22543D,color:#fff
  classDef gho fill:#B7791F,stroke:#975A16,color:#fff
  classDef risk fill:#C53030,stroke:#9B2C2C,color:#fff

  class AAVE core
  class MKT,REW,GRANT,SRV acq
  class GOV,DELEG gov
  class SM,STKA,STKB,CD1,CD2,WW1,WW2,UNSTA,UNSTB stake
  class LP,ABPT,EXITLP bpt
  class POOL,aAAVE,COLL,BORROW,REPAY,UNLOCK,REDEEM lend
  class FEES,COLLECT,TREAS,RES,AFC,BUY fee
  class GHO,GHOREV,ANTI,DIST80,DIST20,USE1,USE2,STKG gho
  class SLASH,REISSUE risk
